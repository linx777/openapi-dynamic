openapi: 3.1.0
info:
  title: HyperETH V2 API (Unified API)
  version: 2.0.0
  description: |
    HyperETH V2 Unified Trading API supporting multiple exchanges (Hyperliquid, Aster Perp DEX, Lighter Protocol, Kuru Protocol).

    **Base URL**: `https://api.hypereth.io/v2/{platform}`

    **Supported Platforms**:
    - `hyperliquid` - Routes to Hyperliquid (Perpetuals DEX)
    - `aster` - Routes to Aster Perp DEX (Perpetuals DEX)
    - `lighter` - Routes to Lighter Protocol (Perpetuals DEX)
    - `kuru` - Routes to Kuru Protocol (Spot DEX on Monad)

    **Cross-DEX Aggregation**: `https://api.hypereth.io/v2/all`
    - `all` - Cross-DEX aggregation (supports: balances)

    All endpoints use PATH-based routing to specify the platform.

    **Note**: Kuru is a spot DEX and does not support perpetual-specific features (positions, funding rates, leverage, liquidations).

servers:
  - url: https://api.hypereth.io/v2/hyperliquid
    description: Hyperliquid Platform (Perpetuals DEX)
  - url: https://api.hypereth.io/v2/aster
    description: Aster Perp DEX Platform (Perpetuals DEX)
  - url: https://api.hypereth.io/v2/lighter
    description: Lighter Protocol Platform (Perpetuals DEX)
  - url: https://api.hypereth.io/v2/kuru
    description: Kuru Protocol Platform (Spot DEX on Monad)
  - url: https://api.hypereth.io/v2/all
    description: Cross-DEX Aggregation

security:
  - ApiKeyAuth: []

paths:
  /getTOB:
    get:
      summary: Get Top of Book
      description: Get best bid/ask prices and mid price
      operationId: v2GetTOB
      tags:
        - Market Data
      parameters:
        - name: symbols
          in: query
          required: false
          description: One symbol or an array of symbols (comma-separated)
          schema:
            type: string
          example: "BTC,ETH"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TopOfBook'
                  dataTime:
                    type: integer
                    format: int64
                    description: Response timestamp
              example:
                data:
                  - symbol: "BTC"
                    bidPrice: "65000.1"
                    bidSize: "0.5"
                    askPrice: "65000.2"
                    askSize: "0.7"
                    midPrice: "65000.15"
                    dexProcessedTimestamp: 1710000000800
                dataTime: 1710000000000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /getOrderBook:
    get:
      summary: Get Order Book
      description: Get order book depth data
      operationId: v2GetOrderBook
      tags:
        - Market Data
      parameters:
        - name: symbol
          in: query
          required: true
          schema:
            type: string
          example: "BTC"
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            enum: [5, 10, 20, 50, 100, 500, 1000]
            default: 100
          description: Number of price levels to return
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderBook'
              example:
                symbol: "BTC"
                bids:
                  - ["65000.0", "0.5"]
                  - ["64999.0", "1.2"]
                  - ["64998.0", "0.8"]
                asks:
                  - ["65001.0", "0.7"]
                  - ["65002.0", "1.1"]
                  - ["65003.0", "0.9"]
                dataTime: 1710000000000
                dexProcessedTimestamp: 1710000000800
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /getSymbolInfo:
    get:
      summary: Get Market Metadata
      description: Get market information and trading rules
      operationId: v2GetSymbolInfo
      tags:
        - Market Data
      parameters:
        - name: symbols
          in: query
          required: false
          description: Filter to specific markets (comma-separated)
          schema:
            type: string
          example: "BTC,ETH"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  symbols:
                    type: array
                    items:
                      $ref: '#/components/schemas/SymbolInfo'
                  dataTime:
                    type: integer
                    format: int64
              example:
                symbols:
                  - symbol: "BTC"
                    marketType: "swap"
                    base: "BTC"
                    quote: "USDT"
                    settle: "USDT"
                    status: "trading"
                    precision:
                      priceDecimals: 4
                      quantityDecimals: 8
                      tickSize: "0.0001"
                      stepSize: "0.00000001"
                      minOrderSize: "0.001"
                    dexProcessedTimestamp: 1710000000800
                dataTime: 1710000000000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /placeOrder:
    post:
      summary: Place Order
      description: Create a new trading order
      operationId: v2PlaceOrder
      tags:
        - Trading
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlaceOrderRequest'
      responses:
        '200':
          description: Order placed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
              example:
                id: "1234567890"
                clientOrderId: "0x1234567890abcdef1234567890abcdef"
                symbol: "BTC"
                side: "sell"
                type: "limit"
                status: "open"
                price: "65000.0"
                amount: "0.01"
                filled: "0"
                remaining: "0.01"
                average: null
                reduceOnly: true
                positionSide: "SHORT"
                createdAt: 1710000000000
                updatedAt: 1710000001000
                dexProcessedTimestamp: 1710000001000
                dexReceivedTimestamp: 1710000001100
                hyperethTimestamp: 1710000001100

  /batchPlaceOrder:
    post:
      summary: Batch Place Orders
      description: |
        Create multiple trading orders in a single request (max 10 orders).

        **Platform Support**: Available on hyperliquid, aster, lighter. **Not available on kuru**.
      operationId: v2BatchPlaceOrder
      tags:
        - Trading
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - orders
              properties:
                orders:
                  type: array
                  maxItems: 10
                  items:
                    $ref: '#/components/schemas/PlaceOrderRequest'
      responses:
        '200':
          description: Batch order response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BatchOrderResponse'
              example:
                success: true
                results:
                  - index: 0
                    success: true
                    order:
                      id: "1234567890"
                      clientOrderId: "0x1234567890abcdef1234567890abcdef"
                      symbol: "BTC"
                      side: "buy"
                      type: "limit"
                      status: "open"
                      price: "65000.0"
                      amount: "0.01"
                      filled: "0"
                      remaining: "0.01"
                      average: null
                      reduceOnly: false
                      positionSide: "LONG"
                      createdAt: 1710000000000
                      dexProcessedTimestamp: 1710000000000
                  - index: 1
                    success: false
                    error:
                      code: "insufficient_balance"
                      message: "Insufficient balance for order"
                      retriable: false
                successCount: 1
                failureCount: 1
                dataTime: 1710000000000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /cancelOrder:
    post:
      summary: Cancel Order
      description: |
        Cancel a specific order.

        **Important**: You must specify either `orderId` OR `clientOrderId` (not both).

        **Kuru Flip Orders**: When canceling a flip order on Kuru, set `isFlipOrder: true`.
      operationId: v2CancelOrder
      tags:
        - Trading
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - symbol
              properties:
                symbol:
                  type: string
                  description: Trading symbol
                  example: "BTC"
                orderId:
                  type: string
                  description: Exchange order ID (specify either this or clientOrderId)
                  example: "123456789"
                clientOrderId:
                  type: string
                  format: uuid
                  description: Client order ID (specify either this or orderId)
                  example: "0x1234567890abcdef1234567890abcdef"
                isFlipOrder:
                  type: boolean
                  default: false
                  description: |
                    Set to true when canceling a flip order (Kuru only).
                    Flip orders use a different cancellation method than regular limit orders.
                accountId:
                  type: string
                  default: "default"
                  description: |
                    Account identifier for multi-account support (Kuru only).
                    If not specified, uses the default account.
                    **Note**: If the account is locked by a running strategy, the cancellation will be rejected.
            examples:
              cancelByOrderId:
                summary: Cancel by Order ID
                value:
                  symbol: "BTC"
                  orderId: "123456789"
              cancelByClientOrderId:
                summary: Cancel by Client Order ID
                value:
                  symbol: "BTC"
                  clientOrderId: "0x1234567890abcdef1234567890abcdef"
              cancelFlipOrder:
                summary: Cancel Flip Order (Kuru)
                value:
                  symbol: "MON/AUSD"
                  orderId: "817936"
                  isFlipOrder: true
      responses:
        '200':
          description: Order canceled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
                  id:
                    type: [string, "null"]
                  clientOrderId:
                    type: [string, "null"]
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                status: "ok"
                id: "1234567890"
                clientOrderId: "0x1234567890abcdef1234567890abcdef"
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /cancelAllOrders:
    post:
      summary: Cancel All Orders
      description: |
        Cancel multiple orders.

        **Platform Support**: Available on hyperliquid, aster, lighter. **Not available on kuru**.
      operationId: v2CancelAllOrders
      tags:
        - Trading
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                symbol:
                  type: string
                  description: Required for symbol-scoped cancellation
                scope:
                  type: string
                  enum: [symbol, all]
                  default: symbol
                scheduledTime:
                  type: integer
                  format: int64
                  description: Future timestamp for scheduled cancel
                cancelScheduled:
                  type: boolean
                  description: Abort scheduled cancel operation
                timeInForce:
                  type: string
                  enum: [immediate, scheduled, abort_scheduled]
                  default: immediate
      responses:
        '200':
          description: Orders canceled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  canceled:
                    type: [array, "null"]
                    items:
                      type: string
                  message:
                    type: [string, "null"]
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                status: "ok"
                canceled: ["123", "124", "125"]
                message: "3 orders canceled"
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /getBalance:
    get:
      summary: Get Balance
      description: |
        Get account balance information.

        **Multi-account support (Kuru only)**: Use `accountId` to query a specific account's balance.
        If not specified, defaults to the primary account.
      operationId: v2GetBalance
      tags:
        - Account
      parameters:
        - name: assets
          in: query
          required: false
          description: Filter to specific assets (comma-separated)
          schema:
            type: string
          example: "USDT,USDC"
        - name: accountId
          in: query
          required: false
          description: |
            Account identifier for multi-account support (Kuru only).
            If not specified, uses the default account.
          schema:
            type: string
          example: "acc_A"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  balances:
                    type: array
                    items:
                      $ref: '#/components/schemas/Balance'
                  dataTime:
                    type: integer
                    format: int64
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                balances:
                  - asset: "USDT"
                    walletBalance: "10000.0"
                    availableBalance: "9800.0"
                    crossUnrealizedPnl: "200.0"
                    marginType: "cross"
                    dexProcessedTimestamp: 1710000000800
                dataTime: 1710000000000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /accounts:
    get:
      summary: Get Accounts
      description: |
        Get all accounts associated with the API key.

        **Platform Support**: Available on **Kuru only**. Other platforms do not support multi-account.

        This endpoint returns a list of all accounts registered under the current API key,
        including the default account and any additional accounts configured via `strategy_signers`.
      operationId: v2GetAccounts
      tags:
        - Account
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      type: object
                      properties:
                        accountId:
                          type: string
                          description: Account identifier
                        address:
                          type: string
                          description: Wallet address for this account
                        isDefault:
                          type: boolean
                          description: Whether this is the default account
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Response timestamp
              example:
                accounts:
                  - accountId: "default"
                    address: "0x1234567890abcdef1234567890abcdef12345678"
                    isDefault: true
                  - accountId: "acc_A"
                    address: "0xabcdef1234567890abcdef1234567890abcdef12"
                    isDefault: false
                  - accountId: "acc_B"
                    address: "0xfedcba0987654321fedcba0987654321fedcba09"
                    isDefault: false
                hyperethTimestamp: 1710000001000

  /getPosition:
    get:
      summary: Get Position
      description: |
        Get position information.

        **Platform Support**: Available on hyperliquid, aster, lighter. **Not available on kuru** (spot DEX - no positions).
      operationId: v2GetPosition
      tags:
        - Account
      parameters:
        - name: symbols
          in: query
          required: false
          description: Filter to specific symbols (comma-separated)
          schema:
            type: string
          example: "BTC,ETH"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  positions:
                    type: array
                    items:
                      $ref: '#/components/schemas/Position'
                  dataTime:
                    type: integer
                    format: int64
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                positions:
                  - symbol: "BTC"
                    positionSide: "LONG"
                    size: "0.01"
                    entryPrice: "65000.0"
                    markPrice: "65100.0"
                    unrealizedPnl: "1.0"
                    leverage: "10"
                    marginType: "cross"
                    dexProcessedTimestamp: 1710000000800
                dataTime: 1710000000000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /getOpenOrders:
    get:
      summary: Get Open Orders
      description: |
        Get all open/unfilled orders for the user.

        **Multi-account support (Kuru only)**: Use `accountId` to query a specific account's orders.
        If not specified, defaults to the primary account.
      operationId: v2GetOpenOrders
      tags:
        - Trading
      parameters:
        - name: symbols
          in: query
          required: false
          description: Filter to specific symbols (comma-separated)
          schema:
            type: string
          example: "BTC,ETH"
        - name: orderType
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/OrderType'
        - name: side
          in: query
          required: false
          schema:
            $ref: '#/components/schemas/Side'
        - name: accountId
          in: query
          required: false
          description: |
            Account identifier for multi-account support (Kuru only).
            If not specified, uses the default account.
          schema:
            type: string
          example: "acc_A"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  orders:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  total:
                    type: integer
                  dataTime:
                    type: integer
                    format: int64
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                orders:
                  - id: "1234567890"
                    clientOrderId: "0x1234567890abcdef1234567890abcde0"
                    symbol: "BTC"
                    side: "buy"
                    type: "limit"
                    status: "open"
                    price: "65000.0"
                    amount: "0.01"
                    filled: "0.005"
                    remaining: "0.005"
                    average: "64950.0"
                    reduceOnly: false
                    positionSide: "LONG"
                    timeInForce: "GTC"
                    stopPrice: null
                    createdAt: 1710000000000
                    updatedAt: 1710000001000
                    dexProcessedTimestamp: 1710000001000
                    dexReceivedTimestamp: 1710000001100
                    hyperethTimestamp: 1710000001100
                  - id: "1234567891"
                    clientOrderId: "0x1234567890abcdef1234567890abcde1"
                    symbol: "ETH/USDT"
                    side: "sell"
                    type: "stop"
                    status: "open"
                    price: "3200.0"
                    amount: "1.0"
                    filled: "0"
                    remaining: "1.0"
                    average: null
                    reduceOnly: true
                    positionSide: "SHORT"
                    timeInForce: "GTC"
                    stopPrice: "3250.0"
                    createdAt: 1710000002000
                    updatedAt: 1710000002000
                    dexProcessedTimestamp: 1710000002000
                    dexReceivedTimestamp: 1710000002100
                    hyperethTimestamp: 1710000002100
                total: 2
                dataTime: 1710000003000
                dexReceivedTimestamp: 1710000002900
                hyperethTimestamp: 1710000003000

  /getUserFills:
    get:
      summary: Get User Fills
      description: |
        Get user's trade fills/executions history.

        **Multi-account support (Kuru only)**: Use `accountId` to query a specific account's fills.
        If not specified, defaults to the primary account.
      operationId: v2GetUserFills
      tags:
        - Trading
      parameters:
        - name: symbols
          in: query
          required: false
          description: Filter to specific symbols (comma-separated, e.g., BTC/USDT,ETH/USDC). If not provided, returns fills for all symbols. Supports multiple symbols for cross-pair analysis.
          schema:
            type: string
          example: "BTC,ETH"
        - name: limit
          in: query
          required: false
          description: Maximum number of fills to return.
          schema:
            type: integer
            default: 100
            maximum: 1000
        - name: cursor
          in: query
          required: false
          description: |
            Pagination cursor for continuing from previous request. Each platform uses a different cursor format:

            **Platform-specific cursor formats:**
            - **Aster**:
              - `"id:12345"` - Returns fills after this ID
              - `"time:1710000000000"` - Returns fills before this timestamp (endTime must be within last 7 days)
              - `"time:1710000000000:1710086400000"` - Returns fills within this time range (max recent 7 days range)
            - **Hyperliquid**: `"time:1710000000000"` - Returns fills before this timestamp (in milliseconds)
            - **Lighter**: `"time:1710000000000:id:12345"` - Combined time and ID format

            Use the `nextCursor` value returned in the pagination object to fetch the next page of results.
          schema:
            type: string
        - name: accountId
          in: query
          required: false
          description: |
            Account identifier for multi-account support (Kuru only).
            If not specified, uses the default account.
          schema:
            type: string
          example: "acc_A"
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  fills:
                    type: array
                    items:
                      $ref: '#/components/schemas/Fill'
                  total:
                    type: integer
                  pagination:
                    type: object
                    properties:
                      hasMore:
                        type: boolean
                      nextCursor:
                        type: [string, "null"]
                        description: |
                          Pagination cursor to use for fetching the next page of results. Platform-specific formats:
                          - Aster: "id:12345" or "time:1710000000000" (matches input cursor format)
                          - Hyperliquid: "time:1710000000000"
                          - Lighter: "time:1710000000000:id:12345"
                  dataTime:
                    type: integer
                    format: int64
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                fills:
                  - fillId: "fill_123456789"
                    orderId: "1234567890"
                    clientOrderId: "0x1234567890abcdef1234567890abcde0"
                    symbol: "BTC"
                    side: "buy"
                    price: "64950.0"
                    quantity: "0.005"
                    quoteQuantity: "324.75"
                    fee: "0.1623"
                    feeAsset: "USDT"
                    isMaker: true
                    timestamp: 1710000001000
                    dexProcessedTimestamp: 1710000000800
                    tradeId: "trade_987654321"
                    hyperethTradeId: "1710000001000001"
                  - fillId: "fill_123456790"
                    orderId: "1234567891"
                    clientOrderId: "0x1234567890abcdef1234567890abcde1"
                    symbol: "ETH/USDT"
                    side: "sell"
                    price: "3210.0"
                    quantity: "0.5"
                    quoteQuantity: "1605.0"
                    fee: "0.8025"
                    feeAsset: "USDT"
                    isMaker: false
                    timestamp: 1710000002000
                    dexProcessedTimestamp: 1710000001800
                    tradeId: "trade_987654322"
                    hyperethTradeId: "1710000002000001"
                total: 2
                pagination:
                  hasMore: false
                  nextCursor: null
                dataTime: 1710000003000
                dexReceivedTimestamp: 1710000000900
                hyperethTimestamp: 1710000001000

  /balances:
    get:
      summary: Get All Balances (Cross-DEX)
      description: |
        Get balances aggregated across all supported DEXes (Hyperliquid, Aster, Lighter).

        **Note**: This endpoint uses the `/v2/all` base URL instead of a platform-specific URL.

        **Endpoint**: `GET https://api.hypereth.io/v2/all/balances`
      operationId: v2GetAllBalances
      tags:
        - Account
      servers:
        - url: https://api.hypereth.io/v2/all
          description: Cross-DEX Aggregation
      parameters:
        - name: assets
          in: query
          required: false
          description: Filter to specific assets (comma-separated, e.g., USDT,USDC)
          schema:
            type: string
          example: "USDT,USDC"
      responses:
        '200':
          description: Successful response with balances from all platforms
          content:
            application/json:
              schema:
                type: object
                properties:
                  platforms:
                    type: array
                    items:
                      $ref: '#/components/schemas/PlatformBalances'
                  dataTime:
                    type: integer
                    format: int64
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                platforms:
                  - platform: "hyperliquid"
                    balances:
                      - asset: "USDC"
                        walletBalance: "10000.0"
                        availableBalance: "9800.0"
                        crossUnrealizedPnl: "200.0"
                        marginType: "cross"
                    error: null
                    dexProcessedTimestamp: 1710000000800
                    dexReceivedTimestamp: 1710000000900
                  - platform: "aster"
                    balances:
                      - asset: "USDT"
                        walletBalance: "15000.0"
                        availableBalance: "14700.0"
                        crossUnrealizedPnl: "300.0"
                        marginType: "cross"
                    error: null
                    dexProcessedTimestamp: 1710000000800
                    dexReceivedTimestamp: 1710000000900
                  - platform: "lighter"
                    balances:
                      - asset: "USDC"
                        walletBalance: "5000.0"
                        availableBalance: "5000.0"
                        crossUnrealizedPnl: "0.0"
                        marginType: "cross"
                      - asset: "USDT"
                        walletBalance: "10000.0"
                        availableBalance: "9800.0"
                        crossUnrealizedPnl: "200.0"
                        marginType: "cross"
                    error: null
                    dexProcessedTimestamp: 1710000000800
                    dexReceivedTimestamp: 1710000000900
                  - platform: "kuru"
                    balances:
                      - asset: "AUSD"
                        walletBalance: "8000.0"
                        availableBalance: "8000.0"
                        crossUnrealizedPnl: null
                        marginType: null
                      - asset: "MON"
                        walletBalance: "50000.0"
                        availableBalance: "50000.0"
                        crossUnrealizedPnl: null
                        marginType: null
                    error: null
                    dexProcessedTimestamp: 1710000000800
                    dexReceivedTimestamp: 1710000000900
                dataTime: 1710000000000
                hyperethTimestamp: 1710000001000

  /getFundingRates:
    get:
      summary: Get Historical Funding Rates
      description: |
        Retrieve historical funding rates for a market. Returns exchange-wide funding rate history.

        **Platform Support**:
        - Hyperliquid: Supports time-based pagination
        - Aster: Supports limit-based fetching
        - Lighter: Supports time-based pagination
        - **Kuru: Not available** (spot DEX - no funding rates)
      operationId: v2GetFundingRates
      tags:
        - Market Data
      parameters:
        - name: symbols
          in: query
          required: true
          description: Unified symbols filter (comma-separated)
          schema:
            type: string
          example: "BTC,ETH"
        - name: startTime
          in: query
          required: false
          description: Millisecond timestamp (inclusive)
          schema:
            type: integer
            format: int64
          example: 1709251200000
        - name: endTime
          in: query
          required: false
          description: Millisecond timestamp (exclusive)
          schema:
            type: integer
            format: int64
        - name: limit
          in: query
          required: false
          description: Maximum number of records (default 100; capped per platform)
          schema:
            type: integer
            default: 100
        - name: cursor
          in: query
          required: false
          description: |
            Pagination cursor from a previous response. Format varies by platform:
            - `time:<ms>` – Timestamp-based pagination (Hyperliquid/Aster/Lighter)
            - `cursor:<token>` – Reserved for future opaque cursors
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  fundingRates:
                    type: array
                    items:
                      $ref: '#/components/schemas/FundingRate'
                  pagination:
                    type: object
                    properties:
                      hasMore:
                        type: boolean
                        description: Additional pages available
                      nextCursor:
                        type: [string, "null"]
                        description: Cursor token for the next page
                  dataTime:
                    type: integer
                    format: int64
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                fundingRates:
                  - symbol: "BTC"
                    fundingRate: "0.00005000"
                    fundingTime: 1710000000000
                  - symbol: "ETH"
                    fundingRate: "-0.00003200"
                    fundingTime: 1710003600000
                pagination:
                  hasMore: true
                  nextCursor: "time:1710000000000"
                dataTime: 1710011000000
                dexReceivedTimestamp: 1710010900000
                hyperethTimestamp: 1710011000000

  /getUserFunding:
    get:
      summary: Get User Funding Fee History
      description: |
        Retrieve user funding fee payment history. Returns user-specific funding fee payments/receipts.

        **Platform Support**: Available on hyperliquid, aster, lighter. **Not available on kuru** (spot DEX - no funding fees).

        **Implementation Notes**:
        - If neither `startTime` nor `endTime` is provided, defaults to last 7 days
        - Funding fees are settled at regular intervals (typically every 8 hours)
        - Positive `fundingFee` indicates fee received (you are receiving funding)
        - Negative `fundingFee` indicates fee paid (you are paying funding)
        - Results are sorted by `fundingTime` in descending order (most recent first)
      operationId: v2GetUserFunding
      tags:
        - Account
      parameters:
        - name: symbols
          in: query
          required: false
          description: Unified symbols filter (comma-separated). If not provided, returns funding for all symbols.
          schema:
            type: string
          example: "BTC,ETH"
        - name: startTime
          in: query
          required: false
          description: Millisecond timestamp (inclusive). Default is 7 days ago.
          schema:
            type: integer
            format: int64
          example: 1709251200000
        - name: endTime
          in: query
          required: false
          description: Millisecond timestamp (inclusive). Default is current time.
          schema:
            type: integer
            format: int64
          example: 1709856000000
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  fundings:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserFunding'
                  total:
                    type: integer
                    description: Total number of records in response
                  dataTime:
                    type: integer
                    format: int64
                    description: Response timestamp
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                fundings:
                  - symbol: "BTC"
                    fundingFee: "-1.2345"
                    fundingAsset: "USDT"
                    fundingTime: 1710000000000
                    positionSize: "0.50"
                  - symbol: "ETH"
                    fundingFee: "0.8765"
                    fundingAsset: "USDT"
                    fundingTime: 1710003600000
                    positionSize: "-1.25"
                total: 2
                dataTime: 1710011000000
                dexReceivedTimestamp: 1710010900000
                hyperethTimestamp: 1710011000000

  /updateLeverage:
    post:
      summary: Update Position Leverage
      description: |
        Update leverage for a specific trading symbol.

        **Platform Support**: Available on hyperliquid, aster, lighter. **Not available on kuru** (spot DEX - no leverage).

        **Implementation Notes**:
        - Leverage must be adjusted before opening positions or when no position exists
        - Some platforms restrict leverage changes when positions are open
        - Maximum allowed leverage varies by symbol and account tier
        - Leverage reduction may be restricted in isolated margin mode with open positions

        **Platform-Specific Limits**:
        - **Hyperliquid**: Asset and notional-dependent (varies by margin tiers; e.g., BTC up to 40x, ETH up to 25x)
        - **Aster**: 1-125 depending on position size and notional brackets, and it is unable to adjust to isolated-margin mode under the Multi-Assets mode.
        - **Lighter**: 1-100 (varies by market)
      operationId: v2UpdateLeverage
      tags:
        - Account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - symbol
                - leverage
                - marginType
              properties:
                symbol:
                  type: string
                  description: Unified market symbol
                  example: "BTC"
                leverage:
                  type: number
                  description: Target leverage value. Valid range depends on platform and position size (typically 1-125).
                  example: 10
                marginType:
                  $ref: '#/components/schemas/MarginType'
                  description: Margin type (cross or isolated)
            examples:
              crossMargin:
                summary: Update leverage with cross margin
                value:
                  symbol: "BTC"
                  leverage: 10
                  marginType: "cross"
              isolatedMargin:
                summary: Update leverage with isolated margin
                value:
                  symbol: "BTC"
                  leverage: 20
                  marginType: "isolated"
      responses:
        '200':
          description: Leverage updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  symbol:
                    type: string
                    description: Trading symbol
                  leverage:
                    type: string
                    description: Updated leverage value
                  marginType:
                    type: string
                    description: Margin type (cross or isolated)
                  maxNotional:
                    type: [string, "null"]
                    description: Maximum notional value allowed at this leverage (if available)
                  dexReceivedTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
                  hyperethTimestamp:
                    type: integer
                    format: int64
                    description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)
              example:
                symbol: "BTC"
                leverage: "10"
                marginType: "cross"
                maxNotional: "1000000"
                dexReceivedTimestamp: 1710010900000
                hyperethTimestamp: 1710011000000

  /strategy/submit/maker-taker-arbitrage:
    post:
      summary: Submit Maker-Taker Arbitrage Strategy
      description: |
        Submit a maker-taker arbitrage strategy that places a maker order on one exchange
        and triggers a taker order on another exchange when conditions are met.

        > **Supported Exchanges**: Currently only **Kuru** is supported. Support for Hyperliquid, Aster, and Lighter is coming soon.

        **How it works**:
        1. Places a maker (limit) order on the maker exchange with GTX (post-only)
        2. When the maker order is placed, monitors for trigger conditions
        3. When triggered, executes a taker order on the taker exchange
        4. Optionally reconciles positions if there's a discrepancy

        **Use Cases**:
        - Cross-exchange arbitrage
        - Market making with hedging
        - Spread capture strategies

        **Endpoint**: `POST https://api.hypereth.io/v2/all/strategy/submit/maker-taker-arbitrage`

        > **Server**: This endpoint is only available on `https://api.hypereth.io/v2/all`. Platform-specific servers (hyperliquid, aster, lighter, kuru) are not supported.
      operationId: v2SubmitMakerTakerArbitrage
      tags:
        - Strategy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MakerTakerArbitrageRequest'
            examples:
              basicArbitrage:
                summary: Basic maker-taker arbitrage
                value:
                  symbol: "MON/AUSD"
                  amount: "100"
                  maker:
                    exchange: "kuru"
                    accountId: "acc_A"
                    side: "buy"
                    price: "0.01"
                  taker:
                    exchange: "kuru"
                    accountId: "acc_B"
                    side: "sell"
              withTriggerConditions:
                summary: With trigger conditions
                value:
                  symbol: "MON/AUSD"
                  amount: "100"
                  maker:
                    exchange: "kuru"
                    accountId: "acc_A"
                    side: "buy"
                    price: "0.01"
                  taker:
                    exchange: "kuru"
                    accountId: "acc_B"
                    side: "sell"
                    slippage: "0.005"
                  takerTriggerConfig:
                    priceCondition:
                      spreadThreshold: "0.001"
                      condition: "above"
                    depthCondition:
                      takerBufferVolume: "10"
                    conditionLogic: "AND"
                  timeout: 30000
                  clientStrategyId: "my_strategy_001"
                  reconciliation:
                    enabled: true
                    timeoutMs: 30000
                    maxSlippageBps: 100
      responses:
        '200':
          description: Strategy submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmitStrategyResponse'
              example:
                strategyId: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
                status: "pending"
                createdAt: 1710000000000
                requestId: "req_123456789"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - missing or invalid API key

  /strategy/status/maker-taker-arbitrage/{strategyId}:
    get:
      summary: Get Strategy Status
      description: |
        Get the current status and details of a submitted maker-taker arbitrage strategy.

        **Status Lifecycle**:
        - `pending` → Strategy submitted, not yet started
        - `maker_placing` → Placing maker order
        - `waiting_trigger` → Maker order placed, waiting for trigger conditions
        - `taker_triggered` → Taker order being executed
        - `reconciling` → Checking for position discrepancies
        - `completed` → Strategy completed successfully
        - `completed_with_recovery` → Completed with position recovery
        - `failed` → Strategy failed (see error field)
        - `cancelled` → Strategy was cancelled
        - `timed_out` → Strategy timed out
        - `requires_intervention` → Manual intervention required

        **Endpoint**: `GET https://api.hypereth.io/v2/all/strategy/status/maker-taker-arbitrage/{strategyId}`

        > **Server**: This endpoint is only available on `https://api.hypereth.io/v2/all`. Platform-specific servers (hyperliquid, aster, lighter, kuru) are not supported.
      operationId: v2GetMakerTakerStatus
      tags:
        - Strategy
      parameters:
        - name: strategyId
          in: path
          required: true
          description: The strategy ID returned from submit endpoint
          schema:
            type: string
          example: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: Strategy status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StrategyStatusResponse'
              example:
                strategyId: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
                status: "completed"
                createdAt: 1710000000000
                updatedAt: 1710000005000
                stateHistory:
                  - "Pending"
                  - "PlacingMaker"
                  - "WaitingTrigger"
                  - "PlacingTaker"
                  - "Completed"
                makerLeg:
                  orderId: "12345"
                  status: "closed"
                  filledSize: "100"
                  remainingSize: "0"
                  avgFillPrice: "0.01"
                  placeTxHash: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                  cancelTxHash: null
                  recovery: null
                takerLeg:
                  orderId: "67890"
                  status: "closed"
                  filledSize: "100"
                  remainingSize: "0"
                  avgFillPrice: "0.0099"
                  txHash: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                  recovery: null
                request:
                  symbol: "MON/AUSD"
                  amount: "100"
                  maker:
                    exchange: "kuru"
                    accountId: "acc_A"
                    side: "buy"
                    price: "0.01"
                  taker:
                    exchange: "kuru"
                    accountId: "acc_B"
                    side: "sell"
        '401':
          description: Unauthorized - missing or invalid API key
        '404':
          description: Strategy not found

  /strategy/list/maker-taker-arbitrage:
    get:
      summary: List Maker-Taker Arbitrage Strategies
      description: |
        List all maker-taker arbitrage strategies for the authenticated user.
        Returns strategies sorted by creation time (newest first).

        **Endpoint**: `GET https://api.hypereth.io/v2/all/strategy/list/maker-taker-arbitrage`

        > **Server**: This endpoint is only available on `https://api.hypereth.io/v2/all`. Platform-specific servers (hyperliquid, aster, lighter, kuru) are not supported.
      operationId: v2ListMakerTakerStrategies
      tags:
        - Strategy
      responses:
        '200':
          description: Strategies listed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListStrategiesResponse'
              example:
                strategies:
                  - strategyId: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
                    status: "completed"
                    createdAt: 1710000000000
                    updatedAt: 1710000005000
                    stateHistory:
                      - "Pending"
                      - "PlacingMaker"
                      - "WaitingTrigger"
                      - "PlacingTaker"
                      - "Completed"
                    makerLeg:
                      orderId: "12345"
                      status: "closed"
                      filledSize: "100"
                      remainingSize: "0"
                      avgFillPrice: "0.01"
                      placeTxHash: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      cancelTxHash: null
                      recovery: null
                    takerLeg:
                      orderId: "67890"
                      status: "closed"
                      filledSize: "100"
                      remainingSize: "0"
                      avgFillPrice: "0.0099"
                      txHash: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                      recovery: null
                    request:
                      symbol: "MON/AUSD"
                      amount: "100"
                      maker:
                        exchange: "kuru"
                        accountId: "acc_A"
                        side: "buy"
                        price: "0.01"
                      taker:
                        exchange: "kuru"
                        accountId: "acc_B"
                        side: "sell"
                  - strategyId: "maker_taker_660e8400-e29b-41d4-a716-446655440001"
                    status: "completed_with_recovery"
                    createdAt: 1710000010000
                    updatedAt: 1710000020000
                    stateHistory:
                      - "Pending"
                      - "PlacingMaker"
                      - "WaitingTrigger"
                      - "SafeExiting"
                      - "Recovering"
                      - "CompletedWithRecovery"
                    makerLeg:
                      orderId: "12346"
                      status: "canceled"
                      filledSize: "100"
                      remainingSize: "0"
                      avgFillPrice: "0.02"
                      placeTxHash: "0x2234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      cancelTxHash: "0xdddddd1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                      recovery:
                        orderId: "99999"
                        txHash: "0xcccccc1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
                        status: "closed"
                        filledSize: "50.5"
                        remainingSize: "0"
                        avgFillPrice: "0.0199"
                    takerLeg: null
                    request:
                      symbol: "MON/AUSD"
                      amount: "100"
                      maker:
                        exchange: "kuru"
                        accountId: "acc_A"
                        side: "sell"
                        price: "0.02"
                      taker:
                        exchange: "kuru"
                        accountId: "acc_B"
                        side: "buy"
                  - strategyId: "maker_taker_770e8400-e29b-41d4-a716-446655440002"
                    status: "waiting_trigger"
                    createdAt: 1710000030000
                    updatedAt: 1710000031000
                    stateHistory:
                      - "Pending"
                      - "PlacingMaker"
                      - "WaitingTrigger"
                    makerLeg:
                      orderId: "12347"
                      status: "open"
                      filledSize: "0"
                      remainingSize: "200"
                      avgFillPrice: null
                      placeTxHash: "0x3334567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
                      cancelTxHash: null
                      recovery: null
                    takerLeg: null
                    request:
                      symbol: "MON/AUSD"
                      amount: "200"
                      maker:
                        exchange: "kuru"
                        accountId: "acc_A"
                        side: "buy"
                        price: "0.015"
                      taker:
                        exchange: "kuru"
                        accountId: "acc_B"
                        side: "sell"
                requestId: "req_123456789"
        '401':
          description: Unauthorized - missing or invalid API key

  /strategy/cancel/maker-taker-arbitrage/{strategyId}:
    post:
      summary: Cancel Maker-Taker Arbitrage Strategy
      description: |
        Cancel a running maker-taker arbitrage strategy.

        The strategy will be transitioned to `cancelled` status if it can be cancelled.
        Strategies that are already completed, failed, or timed out cannot be cancelled.

        **Endpoint**: `POST https://api.hypereth.io/v2/all/strategy/cancel/maker-taker-arbitrage/{strategyId}`

        > **Server**: This endpoint is only available on `https://api.hypereth.io/v2/all`. Platform-specific servers (hyperliquid, aster, lighter, kuru) are not supported.
      operationId: v2CancelMakerTakerStrategy
      tags:
        - Strategy
      parameters:
        - name: strategyId
          in: path
          required: true
          description: The strategy ID to cancel
          schema:
            type: string
          example: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: Strategy cancelled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CancelStrategyResponse'
              example:
                strategyId: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
                status: "cancelled"
                requestId: "req_123456789"
        '400':
          description: Invalid request (strategy cannot be cancelled)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - missing or invalid API key
        '404':
          description: Strategy not found

  /strategy/balances:
    get:
      summary: Get Strategy Balances
      description: |
        Query available balances for multiple accounts on a trading pair.
        Useful for checking account balances before submitting a strategy.

        **Account Format**: `exchange:account_id` (comma-separated for multiple accounts)

        **Example**: `https://api.hypereth.io/v2/all?symbol=MON/AUSD&accounts=kuru:acc_A,kuru:acc_B`

        > **Server**: This endpoint is only available on `https://api.hypereth.io/v2/all`. Platform-specific servers (hyperliquid, aster, lighter, kuru) are not supported.
      operationId: v2GetStrategyBalances
      tags:
        - Strategy
      parameters:
        - name: symbol
          in: query
          required: true
          description: Trading pair symbol (e.g., "MON/AUSD")
          schema:
            type: string
          example: "MON/AUSD"
        - name: accounts
          in: query
          required: true
          description: Comma-separated list of "exchange:account_id" pairs
          schema:
            type: string
          example: "kuru:acc_A,kuru:acc_B"
      responses:
        '200':
          description: Balances retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StrategyBalancesResponse'
              example:
                symbol: "MON/AUSD"
                accounts:
                  - exchange: "kuru"
                    accountId: "acc_A"
                    account: "0x1234567890abcdef1234567890abcdef12345678"
                    baseAvailable: "10000.5"
                    quoteAvailable: "5000.0"
                  - exchange: "kuru"
                    accountId: "acc_B"
                    account: "0xabcdef1234567890abcdef1234567890abcdef12"
                    baseAvailable: "8000.0"
                    quoteAvailable: "12000.0"
                timestamp: 1710000000000
                requestId: "req_123456789"
        '400':
          description: Invalid request (bad symbol or accounts format)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized - missing or invalid API key

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY

  schemas:
    Side:
      type: string
      enum: [buy, sell]

    OrderType:
      type: string
      enum: [limit, market, stop, stop_market, take_profit, take_profit_market, trailing_stop_market, flip]
      description: |
        Order type. Note: `flip` is only available on Kuru (spot DEX).

        **Flip Order (Kuru only)**:
        A flip order places an initial order at `price`, and when filled, automatically places an opposite-side order at `flipPrice`.
        This enables automated take-profit strategies.

    OrderStatus:
      type: string
      enum: [open, partial, closed, canceled, expired, rejected]

    PositionSide:
      type: string
      enum: [LONG, SHORT, BOTH]

    MarginType:
      type: string
      enum: [cross, isolated]

    TimeInForce:
      type: string
      enum: [GTC, IOC, FOK, GTX, GTT]
      description: |
        - GTC: Good Till Canceled
        - IOC: Immediate or Cancel
        - FOK: Fill or Kill
        - GTX: Good Till Crossing (Post-only)
        - GTT: Good Till Time (requires orderExpiry)

        **Kuru-specific behavior:**
        - **Limit orders**: Use `GTX` for post-only (order rejected if it would match immediately). Omit for aggressive trading (allows immediate matching).
        - **Market orders**: Use `FOK` for fill-or-kill (must fill completely or revert). Omit to allow partial fills.

    MarketType:
      type: string
      enum: [spot, swap, future]

    TopOfBook:
      type: object
      properties:
        symbol:
          type: string
          description: Trading symbol
        bidPrice:
          type: [string, "null"]
          description: Best bid price
        bidSize:
          type: [string, "null"]
          description: Best bid size
        askPrice:
          type: [string, "null"]
          description: Best ask price
        askSize:
          type: [string, "null"]
          description: Best ask size
        midPrice:
          type: [string, "null"]
          description: Mid price (calculated from bid and ask)
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venue (DEX) processed this response (in milliseconds)

    OrderBook:
      type: object
      properties:
        symbol:
          type: string
          description: Trading symbol
        bids:
          type: array
          description: Buy orders [price, quantity] (highest price first)
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
        asks:
          type: array
          description: Sell orders [price, quantity] (lowest price first)
          items:
            type: array
            items:
              type: string
            minItems: 2
            maxItems: 2
        dataTime:
          type: integer
          format: int64
          description: Order book snapshot timestamp

    SymbolInfo:
      type: object
      properties:
        symbol:
          type: string
          description: Trading symbol in unified format
        marketType:
          $ref: '#/components/schemas/MarketType'
          description: Market type (spot, swap, future)
        base:
          type: string
          description: Base asset being traded
        quote:
          type: string
          description: Quote currency for pricing
        settle:
          type: string
          description: Settlement currency for margin
        status:
          type: string
          enum: [trading, halted, break]
          description: Market status
        precision:
          type: object
          description: Precision configuration object
          properties:
            priceDecimals:
              type: integer
              description: Number of decimal places for price display
            quantityDecimals:
              type: integer
              description: Number of decimal places for quantity display
            tickSize:
              type: string
              description: Minimum price increment for orders
            stepSize:
              type: string
              description: Minimum quantity increment for orders
            minOrderSize:
              type: string
              description: Minimum order size

    PlaceOrderRequest:
      type: object
      required:
        - symbol
        - side
        - type
        - amount
      properties:
        symbol:
          type: string
          description: Unified market symbol
        side:
          $ref: '#/components/schemas/Side'
        type:
          $ref: '#/components/schemas/OrderType'
        amount:
          type: string
          description: |
            Order quantity.

            **Kuru Market Order Size Semantics** (different from other platforms):
            - Market BUY: `amount` is in quote asset (e.g., "1" means spend 1 AUSD to buy MON)
            - Market SELL: `amount` is in base asset (e.g., "200" means sell 200 MON to get AUSD)
        price:
          type: string
          description: Required for limit and flip orders
        flipPrice:
          type: string
          description: |
            Required for flip orders (Kuru only). The price at which the order flips to the opposite side after fill.

            **Flip Order Lifecycle (Kuru only)**:
            1. User places a flip order with `price` and `flipPrice`
            2. Initial order is placed at `price` (e.g., BUY at 0.01)
            3. When the order fills, a new order is automatically placed on the opposite side at `flipPrice` (e.g., SELL at 0.03)
            4. This enables automated take-profit strategies
        clientOrderId:
          type: string
          description: 'Custom client ID. In Hyperliquid, it is an optional 128 bit hex string. In Aster, it can only be string following the rule `^[\.A-Z\:/a-z0-9_-]{1,36}$`. In LighterDex, it must fit within i64.'
        reduceOnly:
          type: boolean
          description: Reduce-only flag (not supported on Kuru - spot DEX)
        timeInForce:
          $ref: '#/components/schemas/TimeInForce'
        stopPrice:
          type: string
          description: Required for stop/TP orders (not supported on Kuru - spot DEX)
        positionSide:
          $ref: '#/components/schemas/PositionSide'
          description: Position side for hedge mode (not supported on Kuru - spot DEX)
        orderExpiry:
          type: integer
          format: int64
          description: Order expiry timestamp (milliseconds). Required for GTT orders
        provisionOrRevert:
          type: [boolean, "null"]
          description: |
            Provision-or-revert flag for flip orders (Kuru only).
            If true, ensures atomic execution for the flip order.
            Defaults to true if not provided.
        accountId:
          type: [string, "null"]
          description: |
            Account identifier for multi-account support (Kuru only).
            If not specified, uses the default account.
            **Note**: If the account is locked by a running strategy, the order will be rejected.

    Order:
      type: object
      properties:
        id:
          type: string
          description: Exchange order ID
        clientOrderId:
          type: string
          description: Client order ID (if provided)
        symbol:
          type: string
          description: Trading symbol
        side:
          $ref: '#/components/schemas/Side'
        type:
          $ref: '#/components/schemas/OrderType'
        status:
          $ref: '#/components/schemas/OrderStatus'
        price:
          type: string
          description: Order price
        amount:
          type: string
          description: Order quantity
        filled:
          type: string
          description: Filled quantity
        remaining:
          type: string
          description: Remaining quantity
        average:
          type: [string, "null"]
          description: Average fill price
        reduceOnly:
          type: boolean
          description: Reduce-only flag
        positionSide:
          $ref: '#/components/schemas/PositionSide'
          description: Position side (hedge mode)
          nullable: true
        timeInForce:
          $ref: '#/components/schemas/TimeInForce'
        stopPrice:
          type: [string, "null"]
          description: Stop price for stop/TP orders
        flipPrice:
          type: [string, "null"]
          description: Flip price for flip orders (Kuru only). The price at which the order flips to the opposite side after fill.
        createdAt:
          type: integer
          format: int64
          description: Creation timestamp
        updatedAt:
          type: integer
          format: int64
          description: Last update timestamp
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venue (DEX) processed this order book snapshot (in milliseconds)
        dexReceivedTimestamp:
          type: [integer, "null"]
          description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
        hyperethTimestamp:
          type: integer
          description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)

    BatchOrderResponse:
      type: object
      properties:
        success:
          type: boolean
        results:
          type: array
          items:
            type: object
            properties:
              index:
                type: integer
              success:
                type: boolean
              order:
                $ref: '#/components/schemas/Order'
                nullable: true
              error:
                $ref: '#/components/schemas/Error'
                nullable: true
        successCount:
          type: integer
        failureCount:
          type: integer
        dataTime:
          type: integer
          format: int64
        dexReceivedTimestamp:
          type: integer
          format: int64
          description: Timestamp when HyperETH API server received this message from the venue (in milliseconds)
        hyperethTimestamp:
          type: integer
          format: int64
          description: Timestamp when HyperETH API server completed all processing before returning to client (in milliseconds)

    Balance:
      type: object
      properties:
        asset:
          type: string
          description: Asset symbol
        walletBalance:
          type: string
          description: Total wallet balance
        availableBalance:
          type: string
          description: Available balance
        crossUnrealizedPnl:
          type: [string, "null"]
          description: Cross unrealized PnL
        marginType:
          $ref: '#/components/schemas/MarginType'
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venue (DEX) processed this response (in milliseconds)

    Position:
      type: object
      properties:
        symbol:
          type: string
          description: Trading symbol
        positionSide:
          $ref: '#/components/schemas/PositionSide'
        size:
          type: string
          description: Position size
        entryPrice:
          type: string
          description: Average entry price
        markPrice:
          type: string
          description: Current mark price used for PnL calculation
        unrealizedPnl:
          type: string
          description: Unrealized profit/loss
        leverage:
          type: string
          description: Leverage
        marginType:
          $ref: '#/components/schemas/MarginType'
          description: Margin type (cross or isolated)
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venue (DEX) processed this response (in milliseconds)

    Fill:
      type: object
      properties:
        fillId:
          type: string
          description: Unique fill identifier
        orderId:
          type: string
          description: Original order ID
        clientOrderId:
          type: string
          description: Client order ID (if provided)
        symbol:
          type: string
          description: Trading symbol
        side:
          $ref: '#/components/schemas/Side'
        price:
          type: string
          description: Execution price
        quantity:
          type: string
          description: Filled quantity (base asset)
        quoteQuantity:
          type: string
          description: Filled quantity (quote asset)
        fee:
          type: string
          description: Trading fee amount
        feeAsset:
          type: string
          description: Asset used for fee payment
        isMaker:
          type: boolean
          description: Whether this fill was a maker
        timestamp:
          type: integer
          format: int64
          description: Fill execution timestamp
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venue (DEX) processed this fill (in milliseconds)
        tradeId:
          type: string
          description: Exchange-specific trade identifier
        hyperethTradeId:
          type: string
          description: "HyperETH unified trade identifier. Format: {timestamp}||{dex_index}, timestamp: Unix time in milliseconds (13 digits), dex_index: 001 (Hyperliquid), 002 (AsterDEX), 003 (LighterDEX)"

    PlatformBalances:
      type: object
      properties:
        platform:
          type: string
          enum: [hyperliquid, aster, lighter, kuru]
          description: Platform identifier
        balances:
          type: array
          items:
            $ref: '#/components/schemas/Balance'
          description: Array of balance objects for this platform
        error:
          $ref: '#/components/schemas/Error'
          nullable: true
          description: Error object if platform query failed
        dexProcessedTimestamp:
          type: [integer, "null"]
          description: Timestamp when the venues (DEXes) processed this response (in milliseconds)
        dexReceivedTimestamp:
          type: integer
          format: int64
          description: Timestamp when HyperETH API server received messages from the venues (in milliseconds)

    FundingRate:
      type: object
      properties:
        symbol:
          type: string
          description: Unified trading symbol
        fundingRate:
          type: string
          description: Funding rate applied for the interval
        fundingTime:
          type: integer
          format: int64
          description: Timestamp (ms) when the rate was finalized

    UserFunding:
      type: object
      properties:
        symbol:
          type: string
          description: Unified trading symbol
        fundingFee:
          type: string
          description: Funding fee amount (positive=received, negative=paid)
        fundingAsset:
          type: string
          description: Asset used for funding payment
        fundingTime:
          type: integer
          format: int64
          description: Timestamp (ms) when funding was settled
        positionSize:
          type: string
          description: Position size at funding time. Returns "-1" for Aster (historical position size not available).

    Error:
      type: object
      properties:
        code:
          type: string
          example: "invalid_parameters"
        message:
          type: string
        retriable:
          type: boolean

    # ============================================================================
    # Strategy Schemas
    # ============================================================================

    StrategyStatus:
      type: string
      enum: [pending, maker_placing, waiting_trigger, taker_triggered, reconciling, safe_exiting, recovering, completed, completed_with_recovery, failed, cancelled, timed_out, requires_intervention]
      description: |
        Strategy execution status:
        - `pending` - Strategy submitted, not yet started
        - `maker_placing` - Placing maker order
        - `waiting_trigger` - Maker order placed, waiting for trigger conditions
        - `taker_triggered` - Taker order being executed
        - `reconciling` - Checking for position discrepancies
        - `safe_exiting` - Safely exiting (cancelling maker, handling fills)
        - `recovering` - Placing recovery order to close position discrepancy
        - `completed` - Strategy completed successfully
        - `completed_with_recovery` - Completed with position recovery
        - `failed` - Strategy failed
        - `cancelled` - Strategy was cancelled
        - `timed_out` - Strategy timed out
        - `requires_intervention` - Manual intervention required

    MakerLegConfig:
      type: object
      required:
        - exchange
        - accountId
        - side
        - price
      properties:
        exchange:
          type: string
          description: Exchange to place the maker order (e.g., "kuru")
          example: "kuru"
        accountId:
          type: string
          description: Account ID for this leg
          example: "acc_A"
        side:
          $ref: '#/components/schemas/Side'
          description: Order side (buy or sell)
        price:
          type: string
          description: Limit price for the maker order
          example: "0.01"

    TakerLegConfig:
      type: object
      required:
        - exchange
        - accountId
        - side
      properties:
        exchange:
          type: string
          description: Exchange to place the taker order (e.g., "kuru")
          example: "kuru"
        accountId:
          type: string
          description: Account ID for this leg
          example: "acc_B"
        side:
          $ref: '#/components/schemas/Side'
          description: Order side (must be opposite of maker side)
        price:
          type: string
          description: Optional limit price for taker order. If not provided, uses market order.
        slippage:
          type: string
          description: Optional slippage tolerance for market orders
          example: "0.005"

    PriceCondition:
      type: object
      required:
        - spreadThreshold
        - condition
      properties:
        spreadThreshold:
          type: string
          description: Price spread threshold to trigger the taker order
          example: "0.001"
        condition:
          type: string
          enum: [above, below]
          description: |
            Trigger condition:
            - `above` - Trigger when spread is above threshold
            - `below` - Trigger when spread is below threshold

    DepthCondition:
      type: object
      required:
        - takerBufferVolume
      properties:
        takerBufferVolume:
          type: string
          description: Additional volume buffer required in the order book beyond the order amount
          example: "10"

    TakerTriggerConfig:
      type: object
      description: Configuration for taker order trigger conditions
      properties:
        priceCondition:
          $ref: '#/components/schemas/PriceCondition'
          description: Price-based trigger condition
        depthCondition:
          $ref: '#/components/schemas/DepthCondition'
          description: Order book depth trigger condition
        conditionLogic:
          type: string
          enum: [AND, OR]
          default: AND
          description: |
            How to combine multiple conditions:
            - `AND` - All conditions must be met
            - `OR` - Any condition triggers execution
        timeout:
          type: integer
          format: int64
          description: Timeout for trigger conditions in milliseconds

    ReconciliationConfig:
      type: object
      description: Configuration for position reconciliation after strategy execution
      properties:
        enabled:
          type: boolean
          default: true
          description: Whether reconciliation is enabled
        timeoutMs:
          type: integer
          format: int64
          default: 30000
          description: Time to wait before checking for discrepancies (milliseconds)
        discrepancyThreshold:
          type: string
          default: "0"
          description: Minimum size discrepancy to trigger recovery
        maxSlippageBps:
          type: integer
          default: 100
          description: Maximum slippage for recovery orders in basis points (100 = 1%)

    MakerTakerArbitrageRequest:
      type: object
      required:
        - symbol
        - amount
        - maker
        - taker
      properties:
        symbol:
          type: string
          description: Trading pair symbol
          example: "MON/AUSD"
        amount:
          type: string
          description: Order amount for both legs
          example: "100"
        maker:
          $ref: '#/components/schemas/MakerLegConfig'
          description: Maker leg configuration
        taker:
          $ref: '#/components/schemas/TakerLegConfig'
          description: Taker leg configuration
        takerTriggerConfig:
          $ref: '#/components/schemas/TakerTriggerConfig'
          description: Optional trigger conditions for the taker order
        timeout:
          type: integer
          format: int64
          description: Strategy timeout in milliseconds
          example: 30000
        clientStrategyId:
          type: string
          description: Optional client-provided strategy ID
          example: "my_strategy_001"
        reconciliation:
          $ref: '#/components/schemas/ReconciliationConfig'
          description: Optional reconciliation configuration

    SubmitStrategyResponse:
      type: object
      properties:
        strategyId:
          type: string
          description: Unique strategy ID
          example: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
        status:
          $ref: '#/components/schemas/StrategyStatus'
          description: Initial strategy status
        createdAt:
          type: integer
          format: int64
          description: Strategy creation timestamp (milliseconds)
        requestId:
          type: string
          description: Request correlation ID

    StrategyStatusResponse:
      type: object
      description: Strategy status with leg-centric data structure
      properties:
        strategyId:
          type: string
          description: Unique strategy ID
        status:
          $ref: '#/components/schemas/StrategyStatus'
          description: Current strategy status
        createdAt:
          type: integer
          format: int64
          description: Strategy creation timestamp (milliseconds)
        updatedAt:
          type: integer
          format: int64
          description: Last update timestamp (milliseconds)
        stateHistory:
          type: array
          items:
            type: string
          description: State transition history (state names in order of transitions)
        makerLeg:
          $ref: '#/components/schemas/MakerLegInfo'
          description: Detailed maker leg information (null if not yet placed)
        takerLeg:
          $ref: '#/components/schemas/TakerLegInfo'
          description: Detailed taker leg information (null if not yet executed)
        error:
          type: [string, "null"]
          description: Error message (if status is failed or requires_intervention)
        uncancelledOrderId:
          type: [string, "null"]
          description: Order ID that could not be cancelled (if requires_intervention)
        request:
          $ref: '#/components/schemas/MakerTakerArbitrageRequest'
          description: Original request parameters

    MakerLegInfo:
      type: object
      description: Detailed information for maker leg
      properties:
        orderId:
          type: [string, "null"]
          description: Order ID (if placed)
        status:
          $ref: '#/components/schemas/OrderStatus'
          description: Order execution status
        filledSize:
          type: string
          description: Total filled size
          example: "50.25"
        remainingSize:
          type: string
          description: Remaining unfilled size
          example: "49.75"
        avgFillPrice:
          type: [string, "null"]
          description: Average fill price (if any fills)
          example: "0.0105"
        placeTxHash:
          type: [string, "null"]
          description: Transaction hash for order placement
          example: "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
        cancelTxHash:
          type: [string, "null"]
          description: Transaction hash for order cancellation (if cancelled)
          example: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
        recovery:
          $ref: '#/components/schemas/RecoveryOrderInfo'
          description: Recovery order (if maker had fills that needed to be closed)

    TakerLegInfo:
      type: object
      description: Detailed information for taker leg
      properties:
        orderId:
          type: [string, "null"]
          description: Order ID (if available)
        status:
          $ref: '#/components/schemas/OrderStatus'
          description: Order execution status
        filledSize:
          type: string
          description: Total filled size
          example: "100.0"
        avgFillPrice:
          type: [string, "null"]
          description: Average fill price (if any fills)
          example: "0.0099"
        remainingSize:
          type: string
          description: Remaining unfilled size
          example: "0"
        txHash:
          type: [string, "null"]
          description: Transaction hash for taker order
          example: "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
        recovery:
          $ref: '#/components/schemas/RecoveryOrderInfo'
          description: Recovery order (if taker execution failed and needed recovery)

    RecoveryOrderInfo:
      type: object
      description: Recovery order information
      properties:
        orderId:
          type: [string, "null"]
          description: Recovery order ID
        txHash:
          type: [string, "null"]
          description: Transaction hash for recovery order
          example: "0xcccccc1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
        status:
          $ref: '#/components/schemas/OrderStatus'
          description: Recovery order status
        filledSize:
          type: string
          description: Filled size of recovery order
          example: "50.5"
        remainingSize:
          type: string
          description: Remaining size of recovery order
          example: "0"
        avgFillPrice:
          type: [string, "null"]
          description: Average fill price of recovery order
          example: "0.0199"

    CancelStrategyResponse:
      type: object
      properties:
        strategyId:
          type: string
          description: Unique strategy ID
          example: "maker_taker_550e8400-e29b-41d4-a716-446655440000"
        status:
          $ref: '#/components/schemas/StrategyStatus'
          description: Updated strategy status after cancellation
        requestId:
          type: string
          description: Request correlation ID

    ListStrategiesResponse:
      type: object
      properties:
        strategies:
          type: array
          items:
            $ref: '#/components/schemas/StrategyStatusResponse'
          description: List of strategies for the authenticated user
        requestId:
          type: string
          description: Request correlation ID

    AccountBalance:
      type: object
      properties:
        exchange:
          type: string
          description: Exchange name
          example: "kuru"
        accountId:
          type: string
          description: Account ID
          example: "acc_A"
        account:
          type: string
          description: Account address
          example: "0x1234567890abcdef1234567890abcdef12345678"
        baseAvailable:
          type: string
          description: Available balance for the base asset
          example: "10000.5"
        quoteAvailable:
          type: string
          description: Available balance for the quote asset
          example: "5000.0"

    StrategyBalancesResponse:
      type: object
      properties:
        symbol:
          type: string
          description: Trading pair symbol
          example: "MON/AUSD"
        accounts:
          type: array
          items:
            $ref: '#/components/schemas/AccountBalance'
          description: Balance information for each account
        timestamp:
          type: integer
          format: int64
          description: Response timestamp (milliseconds)
        requestId:
          type: string
          description: Request correlation ID